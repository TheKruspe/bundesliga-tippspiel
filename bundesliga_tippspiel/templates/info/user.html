<!--
Copyright 2017 Hermann Krumrey <hermann@krumreyh.com>

This file is part of bundesliga-tippspiel.

bundesliga-tippspiel is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

bundesliga-tippspiel is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with bundesliga-tippspiel.  If not, see <http://www.gnu.org/licenses/>.
-->

{% extends "components/base_layout.html" %}
{% block body %}
    <h1>{{ user.username }}</h1>
    <canvas id="rankings-chart" width="400" height="200"></canvas>

    <!--suppress JSUnusedGlobalSymbols, JSUnusedLocalSymbols -->
    <script>
        let ctx = document.getElementById("rankings-chart").getContext("2d");
        let chart = new Chart(ctx, {
            type: 'line',
            data: {
                labels: [
                    {% for i in range(0, matchday) %}
                        "{{ i + 1 }}",
                    {% endfor %}
                ],
                datasets: [
                    {% set colors = [
                        "red", "blue", "yellow", "green", "purple", "orange",
                        "brown", "black", "gray"
                    ] %}
                    {% set color_index = 0 %}
                    {% for username, positions in leaderboard_data.items() %}
                        {
                            label: "{{ username }}",
                            data: {{ positions }},
                            fill: false,
                            borderColor: "{{ colors[color_index + 8 % 10] }}"
                        },
                        {% set color_index = color_index + 1 %}
                    {% endfor %}
                ]
            },
            options: {
                scales: {
                    yAxes: [{
                        ticks: {
                            begin:1,
                            reverse: true,
                            callback: function(value) {
                                if (value % 1 === 0) {return value;}
                            }
                        }
                    }]
                }
            }
        });
    </script>

{% endblock %}
